<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    overflow: hidden;
  }
  
  .container {
    position: relative;
    height: 100vh;
    overflow: hidden;
  }
  
  .name {
    position: absolute;
    font-size: 50px;
    white-space: nowrap;
    left: 44.5%;
    top: 20px;
    line-height: 1;
    visibility: visible;
  }

  .name-hidden {
    visibility: hidden;
  }

  .winner-text {
    position: absolute;
    top: 50%;
    left: 47%;
    transform: translate(-50%, -50%);
    font-size: 75px;
    display: none;
    text-align: center;
  }

  .overlay {
    position: absolute;
    top: 47%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 20%;
    height: 12rem;
    background-color: rgba(0, 0, 0, 0.3); 
    z-index: 1;
    visibility: visible;
  }

  .triangle-left {
    position: absolute;
    left: 42%;
    top: 44%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-top: 25px solid transparent;
    border-left: 50px solid #555;
    border-bottom: 25px solid transparent;
  }

  .slot-machine {
    position: absolute;
    width: 800px;
    height: auto; 
    top: 50%; 
    left: 50%; 
    transform: translate(-50%, -50%);
    z-index: 1; 
  }

  .button {
  background-color: #d10101; 
  border: none;
  color: white;
  padding: 15px 15px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  border-radius: 100%;
  position: absolute;
  top: 62%;
  left: 45.5%;
  box-shadow: 0 9px #999;
  z-index: 2;
}

  
.button:hover {background-color: #c20000}

.button:active {
  background-color: #c20000;
  box-shadow: 0 5px #666;
  transform: translateY(4px);

}



</style>
</head>
<body>
  
  <div class="winner-text" id="winnerText"></div>
  <div id="overlay" class="overlay"></div>
  <div id="triangle" class="triangle-left"></div>
  <button id="stop" class="button">Stop scrolling</button>
  <button id="reroll" class="button">Reroll</button>
  <img src="slot machine.png" alt="Slot Machine" class="slot-machine" id="slot">
  <div class="container">
    
    <div class="name">Mr. G</div>
    <div class="name">Hashem</div>
    <div class="name">Darius</div>
    <div class="name">Thomas</div>
    <div class="name">Charlie</div>
    <div class="name">Ben</div>
    <div class="name">Minjune</div>
    <div class="name">Selia</div>
    <div class="name">Diya</div>
    <div class="name">Max</div>
    <div class="name">Jesse</div>
    <div class="name">Jonah</div>
    <div class="name">Simon</div>
    <div class="name">Hendrik</div>
  </div>
  
  <script>
    const triangle = document.getElementById('triangle');
    const overlay = document.getElementById('overlay');
    const rerollButton = document.getElementById('reroll');
    const machine = document.getElementById('slot');

    const names = document.querySelectorAll('.name');
    const containerHeight = document.querySelector('.container').offsetHeight;
    const totalNames = names.length;
    const spacing = containerHeight / totalNames;
    const initialPositions = Array.from(names, (_, i) => i * spacing);

    rerollButton.style.display = 'none';
    let scrolling = true; 
    let scrollSpeed = 100;
    let slowingDown = false; 
    let slowdownFactor = 0.985; 

    function updateScroll() {
      if (scrolling) {
        if (slowingDown) {
          scrollSpeed *= slowdownFactor;
          if (scrollSpeed < 0.1) {
            scrollSpeed = 0;
            slowingDown = false;
            scrolling = false;
          }
        }

        for (let i = 0; i < names.length; i++) {
          initialPositions[i] += scrollSpeed;
          if (initialPositions[i] >= containerHeight) {
            initialPositions[i] = initialPositions[i] - containerHeight;
          }
          names[i].style.transform = `translateY(${initialPositions[i]}px)`;
        }
      }

      requestAnimationFrame(updateScroll);
    }

    updateScroll();

    const stopButton = document.getElementById('stop');
    

    stopButton.addEventListener('click', () => {
      names.forEach((name, i) => {
        const rect = name.getBoundingClientRect();
        initialPositions[i] = rect.top;
      });

      slowingDown = true;
      stopButton.disabled = true;
      setTimeout(() => {
        slowingDown = false;
        stopButton.disabled = false;
        
        // Find the name closest to the middle
        let closestNameIndex = 0;
        let minDistance = Math.abs(containerHeight / 2.4 - initialPositions[0]);
        for (let i = 1; i < names.length; i++) {
          const distance = Math.abs(containerHeight / 2.4 - initialPositions[i]);
          if (distance < minDistance) {
            minDistance = distance;
            closestNameIndex = i;
          }
        }
        
        stopButton.style.display = 'none';
        rerollButton.style.display = 'block';
        triangle.style.display = 'none';
        overlay.style.display = 'none';
        machine.style.display = 'none';
        // Show the winner on the screen and hide other names
        const winnerText = document.getElementById('winnerText');
        document.getElementById("winnerText").style.visibility = "visible";
        winnerText.textContent = `The winner is ${names[closestNameIndex].textContent}!`;
        winnerText.style.display = 'block';

        // Hide non-winning names
        names.forEach((name, i) => {
            name.classList.add('name-hidden');
        });
      }, 8000);
      rerollButton.addEventListener('click', () => {
        document.getElementById("winnerText").style.visibility = "hidden";
        names.forEach((name, i) => {
            name.classList.remove('name-hidden');
        });
        scrolling = true;
        scrollSpeed = 100;
        rerollButton.style.display = 'none';
        stopButton.style.display = 'block';
        triangle.style.display = 'block';
        overlay.style.display = 'block';
        machine.style.display = 'block';
      });
    });

  </script>
</body>
</html>
